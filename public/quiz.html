<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSProfiler | Quiz</title>
    <link rel="stylesheet" href="css/style_quiz.css">
    <link rel="icon" href="css/images/logo.png">


</head>


<body onload="onloadEsconder()">
    <header>
    <nav>
      <a href="index.html">
      <img src="css/images/logo.png" alt="Logo CS" id="logoCS">
      </a>
      <p id="nome-usuario">Ol√°, <span id="usuario">MUDAR</span></p>
      <ul>
        <li><a href="index.html">HOME</a></li>
        <li><a href="MUDAR">PERFIS POSS√çVEIS</a></li>
        <li><a href="dashboard_quiz.html">DASHBOARD</a></li>
        <li><a href="#" id="sair" onclick="limparSessao()">SAIR</a></li>
      </ul>
    </nav>
  </header>

    <div id="pontuacaoEJogo">
        <button id="btnIniciarQuiz" onclick="iniciarQuiz()">INICIAR QUIZ</button>

        <div id="pontuacao" class="flex-colunar width-fit-content border-primary">
            
            <div id="pontuacaoFinalJogo" class="flex-colunar padding-8">
                <span id="pontuacaoFinal" class="width-fit-content">
                    <span id="spanPontuacaoFinal"></span>
                </span>


                <span id="msgFinal" class="width-fit-content"></span>
                <div class="frase"></div>


            </div>
        </div>

        <div id="jogo" class="width-fit-content flex-colunar border-secondary">

            

            <div id="perguntaDaQuestaoAtual" class="padding-8">
                <div id="infoQuestao" class="padding-8">
                <span>Quest√£o atual: <span id="spanNumeroDaQuestaoAtual"></span> de <span id="qtdQuestoes"></span>
                    quest√µes.</span>
            </div>
                <span id="spanQuestaoExibida" class="text-bold"></span>
            </div>

            

            <div id="opcoes" class="flex-colunar padding-8">
                <div class="primeira-linha">
                    <span>
                        <input type="radio" id="primeiraOpcao" name="option" class="radio" value="alternativaA" />
                        <label for="primeiraOpcao" class="option" id="labelOpcaoUm"></label>
                    </span>
                    <span>
                        <input type="radio" id="segundaOpcao" name="option" class="radio" value="alternativaB" />
                        <label for="segundaOpcao" class="option" id="labelOpcaoDois"></label>
                </span>
                </div>

                <div class="segunda-linha">
                    <span>
                        <input type="radio" id="terceiraOpcao" name="option" class="radio" value="alternativaC" />
                        <label for="terceiraOpcao" class="option" id="labelOpcaoTres"></label>
                    </span>
                    <span>
                        <input type="radio" id="quartaOpcao" name="option" class="radio" value="alternativaD" />
                        <label for="quartaOpcao" class="option" id="labelOpcaoQuatro"></label>
                    </span>
                </div>

                <div class="terceira-linha">
                    <span>
                        <input type="radio" id="quintaOpcao" name="option" class="radio" value="alternativaE" />
                        <label for="quintaOpcao" class="option" id="labelOpcaoCinco"></label>
                    </span>
                </div>
            </div>

            <div id="botoes" class="flex-colunar padding-8">
                <button onclick="submeter()" id="btnSubmeter">Submeter resposta</button>
            </div>

        </div>
    </div>
</body>

</html>
<script>

    const listaDeQuestoes = [
    {
        tipo: "tatico",
        pergunta: "Como voc√™ prefere iniciar um round?",
        alternativaA: "Indo na frente, enfrentando o inimigo de cara.", // Entry Fragger
        alternativaB: "Indo junto com o time, jogando granadas para ajudar.", // Support
        alternativaC: "Esperando um pouco para ver o que o time decide fazer.", // Lurker
        alternativaD: "Comandando e dizendo quem vai para onde.", // IGL
        alternativaE: "Procurando uma posi√ß√£o para fazer elimina√ß√µes com AWP.", // AWPer
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "lurker",
            alternativaD: "igl",
            alternativaE: "awper"
        }
    },
    {
        tipo: "tatico",
        pergunta: "Qual dessas qualidades mais te descreve?",
        alternativaA: "Corajoso e r√°pido nas decis√µes.", // Entry Fragger
        alternativaB: "Cuidadoso e atento ao que os outros precisam.", // Support
        alternativaC: "Preciso e calculista.", // AWPer
        alternativaD: "Inteligente e estrat√©gico.", // IGL
        alternativaE: "Calmo e frio sob press√£o.", // Clutcher
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "lurker",
            alternativaD: "igl",
            alternativaE: "awper"
        }
    },
    {
        tipo: "tatico",
        pergunta: "Com qual fun√ß√£o voc√™ se identifica mais?",
        alternativaA: "Abrir espa√ßos para o time.", // Entry Fragger
        alternativaB: "Garantir que o plano do time funcione.", // Support
        alternativaC: "Derrubar os oponentes de longe.", // AWPer
        alternativaD: "Criar jogadas por conta pr√≥pria.", // Lurker
        alternativaE: "Pensar o que todos devem fazer.", // IGL
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "awper",
            alternativaD: "lurker",
            alternativaE: "igl"
        }
    },
    {
        tipo: "tatico",
        pergunta: "Em uma situa√ß√£o de 1v3, o que voc√™ faz?",
        alternativaA: "Tento resolver na mira, confio nos meus reflexos.", // Entry Fragger
        alternativaB: "Tento pegar os inimigos separados.", // Clutcher
        alternativaC: "Uso granadas para ganhar vantagem antes de atirar.", // Support
        alternativaD: "Penso nos padr√µes do advers√°rio e tento surpreender.", // Lurker
        alternativaE: "Evito confronto direto, tento plantar a bomba ou guardar.", // IGL
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "awper",
            alternativaD: "lurker",
            alternativaE: "igl"
        }
    },
    {
        tipo: "tatico",
        pergunta: "Se tivesse que treinar apenas uma coisa, o que escolheria?",
        alternativaA: "Reflexos e mira.", // Entry Fragger
        alternativaB: "Utilit√°rios (smokes, flashes).", // Support
        alternativaC: "Posi√ß√µes de sniper.", // AWPer
        alternativaD: "Estrat√©gias e t√°ticas.", // IGL
        alternativaE: "Situa√ß√µes de clutch.", // Clutcher
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "awper",
            alternativaD: "lurker",
            alternativaE: "igl"
        }
    },
    {
        tipo: "tatico",
        pergunta: "Como voc√™ costuma usar as granadas (smokes, flashes, etc)?",
        alternativaA: "Uso quando necess√°rio, mas foco mais na troca√ß√£o.", // Entry Fragger
        alternativaB: "Estudo setups e executo com frequ√™ncia para ajudar o time.", // Support
        alternativaC: "Uso para segurar √¢ngulos e proteger minha posi√ß√£o.", // AWPer
        alternativaD: "Uso para criar distra√ß√µes e oportunidades sozinho.", // Lurker
        alternativaE: "Gosto de coordenar o uso das granadas do time.", // IGL
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "awper",
            alternativaD: "lurker",
            alternativaE: "igl"
        }
    },
    {
        tipo: "tatico",
        pergunta: "Quando o round come√ßa, onde voc√™ prefere jogar?",
        alternativaA: "Avan√ßando agressivamente para pegar algu√©m desprevenido.", // Entry Fragger
        alternativaB: "Perto de onde o time estiver indo para dar cobertura.", // Support
        alternativaC: "Em posi√ß√£o segura para dar pick com AWP.", // AWPer
        alternativaD: "Em locais diferentes, tentando flanquear.", // Lurker
        alternativaE: "Em um lugar onde eu possa ter vis√£o do que o time e o inimigo est√£o fazendo.", // IGL
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "awper",
            alternativaD: "lurker",
            alternativaE: "igl"
        }
    },
    {
        tipo: "tatico",
        pergunta: "Qual sua rela√ß√£o com a comunica√ß√£o no jogo?",
        alternativaA: "Falo o b√°sico, foco mais em jogar.", // Entry Fragger
        alternativaB: "Sempre aviso quando jogo granadas ou cubro algu√©m.", // Support
        alternativaC: "Me comunico quando vejo movimenta√ß√µes e fa√ßo picks.", // AWPer
        alternativaD: "Aviso quando pego algu√©m fora de posi√ß√£o.", // Lurker
        alternativaE: "Falo bastante, tento organizar as jogadas e o posicionamento do time.", // IGL
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "awper",
            alternativaD: "lurker",
            alternativaE: "igl"
        }
    },
    {
        tipo: "tatico",
        pergunta: "Em partidas, qual dessas tarefas voc√™ escolheria?",
        alternativaA: "Ser o primeiro a entrar no bomb.", // Entry Fragger
        alternativaB: "Cuidar das smokes e flashes.", // Support
        alternativaC: "Cobrir a retaguarda e dar picks de longe.", // AWPer
        alternativaD: "Escolher um caminho alternativo e surpreender.", // Lurker
        alternativaE: "Analisar a economia e sugerir a estrat√©gia do round.", // IGL
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "awper",
            alternativaD: "lurker",
            alternativaE: "igl"
        }
    },
    {
        tipo: "tatico",
        pergunta: "O que te d√° mais satisfa√ß√£o em uma partida?",
        alternativaA: "Conseguir v√°rias kills em rush.", // Entry Fragger
        alternativaB: "Fazer uma boa execu√ß√£o em conjunto.", // Support
        alternativaC: "Acertar um tiro decisivo com AWP.", // AWPer
        alternativaD: "Matar algu√©m pelas costas ou desestabilizar o inimigo.", // Lurker
        alternativaE: "Vencer uma rodada com uma t√°tica bem executada.", // IGL
        perfisPorAlternativa: {
            alternativaA: "entry_fragger",
            alternativaB: "support",
            alternativaC: "awper",
            alternativaD: "lurker",
            alternativaE: "igl"
        }
    },
    {
        tipo: "personalidade",
        pergunta: "O que te motiva a jogar CS com frequ√™ncia?",
        alternativaA: "Evoluir meu desempenho e subir de patente.", // Hardcore
        alternativaB: "Ganhar partidas, mas sem press√£o.", // Casual
        alternativaC: "Estar com os amigos e se divertir.", // Social
        alternativaD: "Relaxar e curtir o momento, independente do resultado.", // Relaxado
        alternativaE: "Aprender mais sobre o jogo e testar coisas novas.", // Aprendiz
        perfisPorAlternativa: {
            alternativaA: "hardcore",
            alternativaB: "casual",
            alternativaC: "social",
            alternativaD: "relaxado",
            alternativaE: "aprendiz"
        }
    },
    {
        tipo: "personalidade",
        pergunta: "Como voc√™ reage ap√≥s perder uma partida?",
        alternativaA: "Analiso o que deu errado e fico incomodado at√© melhorar.", // Hardcore
        alternativaB: "Fico chateado, mas logo esque√ßo.", // Casual
        alternativaC: "Dou risada e j√° pulo pra pr√≥xima.", // Social
        alternativaD: "Nem me importo muito, faz parte.", // Relaxado
        alternativaE: "Vejo como aprendizado e tento melhorar.", // Aprendiz
        perfisPorAlternativa: {
            alternativaA: "hardcore",
            alternativaB: "casual",
            alternativaC: "social",
            alternativaD: "relaxado",
            alternativaE: "aprendiz"
        }
    },
    {
        tipo: "personalidade",
        pergunta: "Qual sua prioridade ao entrar em uma partida?",
        alternativaA: "Jogar com foco total e vencer.", // Hardcore
        alternativaB: "Jogar bem, mas sem press√£o.", // Casual
        alternativaC: "Ter uma boa experi√™ncia com o time.", // Social
        alternativaD: "Se divertir com jogadas aleat√≥rias.", // Relaxado
        alternativaE: "Experimentar novas fun√ß√µes ou posi√ß√µes.", // Aprendiz
        perfisPorAlternativa: {
            alternativaA: "hardcore",
            alternativaB: "casual",
            alternativaC: "social",
            alternativaD: "relaxado",
            alternativaE: "aprendiz"
        }
    },
    {
        tipo: "personalidade",
        pergunta: "Voc√™ costuma jogar mais com:",
        alternativaA: "Jogadores do mesmo n√≠vel, com comunica√ß√£o s√©ria.", // Hardcore
        alternativaB: "Amigos e conhecidos com n√≠vel pr√≥ximo.", // Casual
        alternativaC: "Amigos, independentemente de n√≠vel.", // Social
        alternativaD: "Qualquer pessoa, o importante √© brincar.", // Relaxado
        alternativaE: "Pessoas que me ensinam ou que posso aprender observando.", // Aprendiz
        perfisPorAlternativa: {
            alternativaA: "hardcore",
            alternativaB: "casual",
            alternativaC: "social",
            alternativaD: "relaxado",
            alternativaE: "aprendiz"
        }
    },
    {
        tipo: "personalidade",
        pergunta: "Como voc√™ enxerga sua evolu√ß√£o no jogo?",
        alternativaA: "Quero ser o melhor poss√≠vel, talvez at√© entrar em competitivo real.", // Hardcore
        alternativaB: "Quero melhorar, mas sem cobran√ßas.", // Casual
        alternativaC: "N√£o penso nisso, s√≥ quero jogar com os amigos.", // Social
        alternativaD: "Evoluir √© legal, mas n√£o √© meu foco.", // Relaxado
        alternativaE: "Tenho vontade de crescer, mesmo come√ßando devagar.", // Aprendiz
        perfisPorAlternativa: {
            alternativaA: "hardcore",
            alternativaB: "casual",
            alternativaC: "social",
            alternativaD: "relaxado",
            alternativaE: "aprendiz"
        }
    },
]

    let perfisTaticos = {
    "entry_fragger": 0,
    "support": 0,
    "lurker": 0,
    "awper": 0,
    "igl": 0
    }

    let perfisPersonalidade = {
    "hardcore": 0,
    "casual": 0,
    "social": 0,
    "relaxado": 0,
    "aprendiz": 0,
    }

let numeroAtual = 0;

function limparSessao() {
        // Limpa os dados da sess√£o
        sessionStorage.clear();
        window.location.href = "login.html";
    }

function onloadEsconder() {
    // Busca o nome do usu√°rio do sessionStorage para exibir na p√°gina
    const nomeUsuario = sessionStorage.getItem("NOME_USUARIO");
    document.getElementById("usuario").textContent = nomeUsuario;

    document.getElementById('pontuacao').style.display = "none";
    document.getElementById('jogo').style.display = "none";
}

function iniciarQuiz() {
    document.getElementById('pontuacao').style.display = "flex";
    document.getElementById('jogo').style.display = "flex";
    document.getElementById('btnIniciarQuiz').style.display = "none";
    document.getElementById('qtdQuestoes').textContent = listaDeQuestoes.length;
    mostrarQuestao(numeroAtual);
}

function mostrarQuestao(indice) {
    const questaoAtual = listaDeQuestoes[indice];
    document.getElementById("spanNumeroDaQuestaoAtual").textContent = indice + 1;
    document.getElementById("spanQuestaoExibida").textContent = questaoAtual.pergunta;
    document.getElementById("labelOpcaoUm").textContent = questaoAtual.alternativaA;
    document.getElementById("labelOpcaoDois").textContent = questaoAtual.alternativaB;
    document.getElementById("labelOpcaoTres").textContent = questaoAtual.alternativaC;
    document.getElementById("labelOpcaoQuatro").textContent = questaoAtual.alternativaD;
    document.getElementById("labelOpcaoCinco").textContent = questaoAtual.alternativaE;

    desmarcarRadioButtons();
}

function desmarcarRadioButtons() {
    const radios = document.getElementsByName("option");
    radios.forEach(r => r.checked = false);
}

function submeter() {
    let selecionado = null;
    let radios = document.getElementsByName("option");
    console.log(radios);

    // Verificar se algum radio button est√° selecionado
    for (let i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            selecionado = radios[i];
            break;
        }
}
if (!selecionado) {
    alert("Escolha uma op√ß√£o antes de continuar.");
    return;
}

    const questao = listaDeQuestoes[numeroAtual];
    const perfil = questao.perfisPorAlternativa[selecionado.value];

    // Soma ao json perfisTaticos ou perfisPersonalidade 
    if (questao.tipo == "tatico") {
        perfisTaticos[perfil]++;
    } else {
        perfisPersonalidade[perfil]++;
    }

    numeroAtual++;

    if (numeroAtual < listaDeQuestoes.length) {
        mostrarQuestao(numeroAtual);
    } else {
        mostrarResultado();
    }
}

function mostrarResultado() {
    let idUsuario = sessionStorage.getItem("ID_USUARIO");
    if (!idUsuario) {
        alert("Voc√™ precisa estar logado para salvar o resultado!");
        return;
    }

    document.getElementById('jogo').style.display = "none";

    const perfilTatico = maisPontuado(perfisTaticos);
    const perfilPersonalidade = maisPontuado(perfisPersonalidade);

    // Formata√ß√£o para exibir o nome do perfil t√°tico
    let perfilTaticoExibido = perfilTatico;
    if (perfilTatico === 'entry_fragger') {
        perfilTaticoExibido = "Entry Fragger";
    } else if (perfilTatico === 'igl') {
        perfilTaticoExibido = "IGL - (In-Game-Leader)"
    } else if (perfilTatico === 'awper') {
        perfilTaticoExibido = "AWPer";
    } else if (perfilTatico === 'lurker') {
        perfilTaticoExibido = "Lurker";
    } else if (perfilTatico === 'support') {
        perfilTaticoExibido = "Support";
    }

    // Formata√ß√£o para exibir o nome do perfil de personalidade
    let perfilPersonalidadeExibido = perfilPersonalidade;
    if (perfilPersonalidade === 'hardcore') {
        perfilPersonalidadeExibido = "Hardcore";
    } else if (perfilPersonalidade === 'casual') {
        perfilPersonalidadeExibido = "Casual";
    } else if (perfilPersonalidade === 'social') {
        perfilPersonalidadeExibido = "Social";
    } else if (perfilPersonalidade === 'relaxado') {
        perfilPersonalidadeExibido = "Relaxado";
    } else if (perfilPersonalidade === 'aprendiz') {
        perfilPersonalidadeExibido = "Aprendiz";
    }

    // Exibi√ß√£o frase sobre o perfil t√°tico e de personalidade
    let fraseTatica = ""
    if (perfilTaticoExibido == 'Entry Fragger') {
        fraseTatica = "üß® ‚ÄúVoc√™ √© o abridor de caminhos! Corajoso, r√°pido e agressivo, √© quem cria espa√ßo e inicia as batalhas com confian√ßa.‚Äù"
    } else if (perfilTaticoExibido == 'Support') {
        fraseTatica = "üõ†Ô∏è ‚ÄúVoc√™ √© a base do time! Sempre pronto para ajudar com flashes, smokes e cobertura, sua presen√ßa √© essencial para a vit√≥ria.‚Äù"
    } else if (perfilTaticoExibido == 'Lurker') {
        fraseTatica = "üçÄ ‚ÄúVoc√™ √© o mestre da surpresa! Silencioso e estrat√©gico, pega os inimigos desprevenidos e vira o jogo do seu jeito.‚Äù"
    } else if (perfilTaticoExibido == 'AWPer') {
        fraseTatica = "üéØ ‚ÄúVoc√™ √© o atirador de elite! Preciso, calmo e mortal √† dist√¢ncia, sua mira define o rumo do round.‚Äù"
    } else if (perfilTaticoExibido == 'IGL - (In-Game-Leader)') {
        fraseTatica = "üß† ‚ÄúVoc√™ √© o c√©rebro da equipe! Comanda, planeja e organiza ‚Äî √© quem transforma cinco jogadores em um time coeso.‚Äù"
    }

    // Exibi√ß√£o frase sobre o perfil de personalidade
    let frasePersonalidade = ""
    if (perfilPersonalidadeExibido == 'Hardcore') {
        frasePersonalidade = "üî• ‚ÄúVoc√™ leva o jogo a s√©rio! Cada partida √© uma batalha, e sua vontade de vencer √© o que te move.‚Äù"
    } else if (perfilPersonalidadeExibido == 'Casual') {
        frasePersonalidade = "‚öîÔ∏è ‚ÄúVoc√™ gosta de competir, mas com leveza! Busca evoluir e vencer, sem deixar a divers√£o de lado.‚Äù"
    } else if (perfilPersonalidadeExibido == 'Social') {
        frasePersonalidade = "üéâ ‚ÄúPara voc√™, o CS √© sobre estar junto! O que importa n√£o √© o resultado, mas sim as risadas com os amigos.‚Äù"
    } else if (perfilPersonalidadeExibido == 'Relaxado') {
        frasePersonalidade = "üòé ‚ÄúVoc√™ joga pela divers√£o! Entra no servidor para relaxar, experimentar e curtir o momento sem press√£o.‚Äù"
    } else if (perfilPersonalidadeExibido == 'Aprendiz') {
        frasePersonalidade = "üìö ‚ÄúVoc√™ √© movido pela curiosidade! Est√° sempre testando, aprendendo e buscando evoluir a cada partida.‚Äù"
    }



    document.getElementById('msgFinal').innerHTML = `
        <span id="perfilTatico">Perfil T√°tico: <strong>${perfilTaticoExibido}</strong></span><br>

        <span id="fraseTatica">${fraseTatica}<br></span>

        <span id="perfilPersonalidade">Perfil de Personalidade: <strong>${perfilPersonalidadeExibido}</strong><br></span>

        <span id="frasePersonalidade">${frasePersonalidade}</span>
    `;


    

    function maisPontuado(perfis) {
        var maior = -1
        var nomePerfil = "" // nome do perfil mais pontuado
        for (var perfil in perfis) {
            if (perfis[perfil] > maior) {
                maior = perfis[perfil]
                nomePerfil = perfil
            }
        }
        return nomePerfil
    }

    fetch("/quiz/salvar", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
        idUsuario: Number(idUsuario),
        tatico: perfisTaticos,
        personalidade: perfisPersonalidade,
        perfilTatico: perfilTatico,
        perfilPersonalidade: perfilPersonalidade
    })
});
}
    
</script>